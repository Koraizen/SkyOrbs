ğŸ¯ GENEL YAPI ANALÄ°ZÄ°
âœ… GÃ¼Ã§lÃ¼ YÃ¶nler:

Ã‡ok Ä°yi ModÃ¼ler YapÄ± - Her sistem ayrÄ± paket/class'ta
28 FarklÄ± Åekil - Muazzam Ã§eÅŸitlilik
20+ Palet Sistemi - Harika gÃ¶rsel Ã§eÅŸitlilik
Atmosfer Sistemi - 8 farklÄ± atmosfer tipi
Modifier Sistemi - Hollow, ore-rich gibi varyasyonlar
Config-Driven - Her ÅŸey config'den ayarlanabilir
Async Generation - Performans odaklÄ±
Progress Display - BossBar/ActionBar desteÄŸi


âš ï¸ KRÄ°TÄ°K SORUNLAR
1. ORE GENERATION SORUNU - Ã‡OK Ã–NEMLÄ°!
java// OreGenerator.java - Line 54-85
private static void generateOreType(...) {
    // PROBLEM: Distance calculation YANLIÅ!
    double distance;
    if (isHollow) {
        distance = shellStart + random.nextDouble() * (shellEnd - shellStart);
    } else {
        // BU KISIM YANLIÅ - Ore'lar yÃ¼zeyde deÄŸil MERKEZE YAKIN olmalÄ±!
        double minDistance = radius * (1.0 - depthRange[1]); 
        double maxDistance = radius * (1.0 - depthRange[0]); 
        distance = minDistance + random.nextDouble() * (maxDistance - minDistance);
    }
}
SORUN: Solid planetlerde ore'lar yÃ¼zeyde spawn oluyor, iÃ§erde deÄŸil!
Ã‡Ã–ZÃœM:
java// SOLID PLANET iÃ§in doÄŸru distance hesabÄ±:
if (isHollow) {
    // Hollow - shell iÃ§inde
    distance = shellStart + random.nextDouble() * (shellEnd - shellStart);
} else {
    // SOLID - Depth range'e gÃ¶re MERKEZE YAKIN spawn
    // depthRange[0] = 0.3 (yÃ¼zeye yakÄ±n), depthRange[1] = 0.9 (merkeze yakÄ±n)
    // Distance 0 ile radius arasÄ±nda olmalÄ±, depth'e gÃ¶re aÄŸÄ±rlÄ±klÄ±
    double normalizedDepth = depthRange[0] + random.nextDouble() * (depthRange[1] - depthRange[0]);
    distance = radius * (1.0 - normalizedDepth); // Tersine Ã§evir - depth arttÄ±kÃ§a distance azalÄ±r
}

2. HOLLOW PLANET SHELL SPAWNING
java// GenerationManager.java - generateHollowPlanet()
// PROBLEM: Shell thickness config'den geliyor ama sabit 5 kullanÄ±lÄ±yor
int shellThickness = plugin.getConfig().getInt("hollow.shell_thickness", 5);
Ä°YÄ°LEÅTÄ°RME:
java// ConfigManager'a ekle:
public int getHollowShellThickness() {
    return plugin.getConfig().getInt("modifiers.hollow.shellThickness", 5);
}

3. TREE GENERATION GROUND CHECK
java// TreeGenerator.java - Line 25
private static int findGroundLevel(...) {
    // PROBLEM: Raycast doÄŸru ama tree spawn Y hesabÄ± yanlÄ±ÅŸ
    generateTree(blocks, x, y + 1, z, type, random); // +1 to spawn above ground
}
SORUN: AÄŸaÃ§lar bazen havada kalÄ±yor Ã§Ã¼nkÃ¼ ground check doÄŸru Ã§alÄ±ÅŸmÄ±yor.
Ã‡Ã–ZÃœM:
java// Daha saÄŸlam ground check:
private static int findGroundLevel(int cx, int cy, int cz, int x, int z, int radius, World world) {
    int searchStartY = cy + radius + 5;
    int searchEndY = cy - radius;

    for (int y = searchStartY; y >= searchEndY; y--) {
        Block current = world.getBlockAt(x, y, z);
        Block above = world.getBlockAt(x, y + 1, z);

        // SOLID block altÄ±nda, AIR Ã¼stÃ¼nde = ground!
        if (current.getType().isSolid() && 
            (above.getType() == Material.AIR || above.getType() == Material.CAVE_AIR)) {
            
            // Gezegen yÃ¼zeyine yakÄ±n mÄ± kontrol et
            double distFromCenter = Math.sqrt(
                (x - cx) * (x - cx) +
                (y - cy) * (y - cy) +
                (z - cz) * (z - cz)
            );
            
            // YÃ¼zeyde (radius Â± 3 blok) olmalÄ±
            if (Math.abs(distFromCenter - radius) <= 3) {
                return y;
            }
        }
    }
    return -1;
}

4. TREASURE LOOT AMOUNT BUG
java// TreasureGenerator.java - Line 150+
// PROBLEM: ItemStack amount 0 olamaz ama random.nextInt() 0 verebilir!

// YANLIÅ:
loot.add(new ItemStack(Material.NETHERITE_SCRAP, random.nextInt(2)));

// DOÄRU:
loot.add(new ItemStack(Material.NETHERITE_SCRAP, Math.max(1, random.nextInt(2) + 1)));
TÃœM TREASURE LOOT'LARDA DÃœZELTÄ°LMELÄ°:
java// Her ItemStack oluÅŸturma yerinde:
amount: Math.max(1, min + random.nextInt(max - min + 1))

5. DUNGEON LOOT AMOUNT BUG (AynÄ± Sorun)
java// DungeonGenerator.java - generateLootItems()
// AYNI SORUN - amount 0 olabiliyor!

// DÃœZELTÄ°LMESÄ° GEREKEN SATIRLAR:
loot.add(new ItemStack(Material.DIAMOND, Math.max(1, random.nextInt(3) + 1)));
loot.add(new ItemStack(Material.EMERALD, Math.max(1, random.nextInt(2) + 1)));
// VB...

6. PLACEMENT SERVICE LOCATION LEAK
java// PlacementService.java
private final Set<String> reservedLocations = new HashSet<>();

// PROBLEM: Location'lar reserve ediliyor ama release edilmiyor!
public void reserveLocation(int x, int z) {
    reservedLocations.add(x + "," + z);
}

public void releaseLocation(int x, int z) {
    reservedLocations.remove(x + "," + z);
}
GenerationManager'da:
java// SORUN: Exception durumunda release edilmiyor!
try {
    placementService.reserveLocation(x, z);
    // ... generation code ...
} catch (Exception e) {
    // BUG: Location release edilmedi!
    plugin.logError("...", e);
}
Ã‡Ã–ZÃœM:
javatry {
    placementService.reserveLocation(x, z);
    // ... generation ...
} catch (Exception e) {
    plugin.logError("...", e);
} finally {
    // HER ZAMAN RELEASE ET!
    placementService.releaseLocation(x, z);
}

7. ATMOSPHERIC EFFECTS NULL CHECK
java// PlanetAtmosphereManager.java - Line 75
AtmosphereType atmosphere = planetAtmospheres.get(nearestPlanet.getId());
if (atmosphere != null) {
    applyAtmosphereEffects(player, nearestPlanet, atmosphere);
}

// SORUN: atmosphere null olabilir ama default CLEAR olmalÄ±!

// Ã‡Ã–ZÃœM:
AtmosphereType atmosphere = planetAtmospheres.getOrDefault(
    nearestPlanet.getId(), 
    AtmosphereType.CLEAR
);
applyAtmosphereEffects(player, nearestPlanet, atmosphere);

8. THREE.JS VERSION WARNING
java// SkyOrbs.java comments:
// IMPORTANT: Do NOT use THREE.CapsuleGeometry as it was introduced in r142.
SORUN: Plugin THREE.js kullanmÄ±yor ama comment var - kafa karÄ±ÅŸtÄ±rÄ±cÄ±!
Ã‡Ã–ZÃœM: Bu comment'i sil - React artifacts iÃ§in ama bu Bukkit plugin'i!

ğŸ”§ PERFORMANS Ä°YÄ°LEÅTÄ°RMELERÄ°
1. BATCH PLACEMENT OPTIMIZATION
java// GenerationManager.java - placeBlocksInBatches()
// Ä°YÄ°LEÅTÄ°RME: Chunk loading optimize edilebilir

// ÅUAN:
for (ChunkPos pos : chunksToLoad) {
    if (!world.isChunkLoaded(pos.x, pos.z)) {
        world.loadChunk(pos.x, pos.z, false);
    }
}

// DAHA Ä°YÄ°:
List<CompletableFuture<Chunk>> chunkFutures = new ArrayList<>();
for (ChunkPos pos : chunksToLoad) {
    if (!world.isChunkLoaded(pos.x, pos.z)) {
        chunkFutures.add(world.getChunkAtAsync(pos.x, pos.z));
    }
}
// TÃ¼m chunk'larÄ±n yÃ¼klenmesini bekle
CompletableFuture.allOf(chunkFutures.toArray(new CompletableFuture[0])).join();

2. ORE GENERATION OPTIMIZATION
java// OreGenerator.java
// PROBLEM: Her vein iÃ§in random position hesaplanÄ±yor - yavaÅŸ!

// Ä°YÄ°LEÅTÄ°RME: Vein position'larÄ±nÄ± pre-calculate et:
List<VeinPosition> veinPositions = new ArrayList<>();
for (int i = 0; i < veinCount; i++) {
    veinPositions.add(calculateVeinPosition(...));
}

// Sonra batch olarak place et
for (VeinPosition pos : veinPositions) {
    generateVein(ores, pos.x, pos.y, pos.z, ...);
}

ğŸ“ CODE QUALITY Ä°YÄ°LEÅTÄ°RMELERÄ°
1. MAGIC NUMBERS
java// Ã‡ok fazla magic number var!

// KÃ–TÃœ:
if (distance <= radius * 1.5) { ... }
if (orb.getCoreLevel() >= 3) { ... }

// Ä°YÄ° (Constants.java'ya ekle):
public static final double ATMOSPHERE_RADIUS_MULTIPLIER = 1.5;
public static final int MIN_CORE_LEVEL_FOR_ATMOSPHERE = 3;

2. REPEATED CODE
java// BiomeType, AtmosphereType, PlanetModifier'da tekrar eden pattern:

// HER ENUM'DA AYNI KOD:
public static TYPE getRandomType(Random random) {
    double totalWeight = 0.0;
    for (TYPE type : values()) {
        totalWeight += type.getProbability();
    }
    // ...
}

// Ã‡Ã–ZÃœM: Generic utility method:
public class WeightedRandom {
    public static <T extends Weighted> T select(T[] values, Random random) {
        // ...
    }
}

3. ERROR HANDLING
java// DatabaseManager.java - Ã‡ok fazla catch block var

// KÃ–TÃœ:
try {
    // ...
} catch (SQLException e) {
    sender.sendMessage("Â§cVeritabanÄ± hatasÄ±!");
}

// Ä°YÄ°:
try {
    // ...
} catch (SQLException e) {
    plugin.logError("Database error in getAllOrbs()", e);
    sender.sendMessage(plugin.getConfigManager().getMessage("databaseError"));
}

ğŸ¨ FEATURE Ä°YÄ°LEÅTÄ°RME Ã–NERÄ°LERÄ°
1. HOLLOW PLANET INTERIOR STRUCTURES
Harika fikir ama ÅŸu eklenmeli:
java// GenerationManager.java - generateInteriorStructures()
// Ã–NERI: YapÄ±lar arasÄ± mesafe kontrolÃ¼

private void generateInteriorStructures(...) {
    List<Location> structureLocations = new ArrayList<>();
    
    for (int i = 0; i < structureCount; i++) {
        Location newLoc = calculateStructureLocation(...);
        
        // MESAFE KONTROLÃœ - Ãœst Ã¼ste binmesin!
        boolean tooClose = false;
        for (Location existing : structureLocations) {
            if (newLoc.distance(existing) < 20) {
                tooClose = true;
                break;
            }
        }
        
        if (!tooClose) {
            generateInteriorStructure(blocks, newLoc.x, newLoc.y, newLoc.z, biome, random);
            structureLocations.add(newLoc);
        }
    }
}

2. PALETTE SYSTEM MATERIAL CACHING
java// PlanetPalette.java - getMaterialByDepth()
// PROBLEM: Her Ã§aÄŸrÄ±da random seÃ§im yapÄ±lÄ±yor - tutarsÄ±z!

// Ä°YÄ°LEÅTÄ°RME: Material cache ekle:
private final Map<Integer, Material> materialCache = new HashMap<>();

public Material getMaterialByDepth(int depth, Random random) {
    return materialCache.computeIfAbsent(depth, d -> {
        // ... selection logic ...
    });
}

3. ATMOSPHERE PARTICLE OPTIMIZATION
java// PlanetAtmosphereManager.java - spawnAtmosphereParticles()
// PROBLEM: Her saniye 5 parÃ§acÄ±k = yÃ¼ksek load!

// Ä°YÄ°LEÅTÄ°RME: Distance-based spawning:
private void spawnAtmosphereParticles(Player player, AtmosphereType atmosphere) {
    Location loc = player.getLocation();
    World world = loc.getWorld();
    Random random = new Random();
    
    // Oyuncu sayÄ±sÄ±na gÃ¶re particle count ayarla
    int playerCount = world.getPlayers().size();
    int particleCount = Math.max(2, 5 - playerCount); // Ã‡ok oyuncu varsa azalt
    
    for (int i = 0; i < particleCount; i++) {
        // ...
    }
}

ğŸ“Š TEST COVERAGE EKLENMELÄ°
java// EKSÄ°K TESTLER:

// 1. OreGenerator Test
@Test
public void testOreSpawningInSolidPlanet() {
    // Ore'larÄ±n iÃ§erde spawn olduÄŸunu doÄŸrula
}

@Test
public void testOreSpawningInHollowPlanet() {
    // Shell iÃ§inde spawn olduÄŸunu doÄŸrula
}

// 2. TreeGenerator Test
@Test
public void testTreeGroundCheck() {
    // AÄŸaÃ§larÄ±n yerde spawn olduÄŸunu doÄŸrula
}

// 3. TreasureGenerator Test
@Test
public void testLootAmountNeverZero() {
    // ItemStack amount'Ä±n asla 0 olmadÄ±ÄŸÄ±nÄ± doÄŸrula
}

ğŸ”’ GÃœVENLÄ°K Ä°YÄ°LEÅTÄ°RMELERÄ°
1. SQL INJECTION PREVENTÄ°ON
java// DatabaseManager.java - GÃ¼venli ama iyileÅŸtirilebilir

// PreparedStatement kullanÄ±lÄ±yor - Ä°YÄ°! âœ…
// Ama transaction yÃ¶netimi eksik:

public void saveOrb(Orb orb) throws SQLException {
    connection.setAutoCommit(false); // Transaction baÅŸlat
    try {
        // ... save operations ...
        connection.commit(); // BaÅŸarÄ±lÄ± - commit
    } catch (SQLException e) {
        connection.rollback(); // Hata - geri al
        throw e;
    } finally {
        connection.setAutoCommit(true);
    }
}

2. PLAYER INPUT VALIDATION
java// GezegenCommand.java - handleTeleport()
// PROBLEM: Gezegen ismi validasyonu yok!

// EKLE:
if (name.length() > Constants.MAX_PLANET_NAME_LENGTH) {
    sender.sendMessage("Â§cGezegen ismi Ã§ok uzun!");
    return;
}

if (!name.matches(Constants.PLANET_NAME_PATTERN)) {
    sender.sendMessage("Â§cGeÃ§ersiz karakterler!");
    return;
}

ğŸ“¦ CONFIG Ä°YÄ°LEÅTÄ°RMELERÄ°
1. VALIDATOR EKLE
java// ConfigManager.java - validateConfig()
// Daha kapsamlÄ± validation ekle:

public void validateConfig() {
    List<String> errors = new ArrayList<>();
    
    // Radius checks
    if (getMinRadius() >= getMaxRadius()) {
        errors.add("minRadius must be < maxRadius");
    }
    
    // Performance checks
    if (getBlocksPerBatch() > 2000) {
        errors.add("blocksPerBatch too high - may cause lag");
    }
    
    // Shell thickness check
    if (getShellThickness() < 3 || getShellThickness() > 15) {
        errors.add("shellThickness should be 3-15");
    }
    
    // Log all errors
    if (!errors.isEmpty()) {
        plugin.logWarning("Config validation errors:");
        errors.forEach(plugin::logWarning);
    }
}

ğŸ¯ Ã–NCELÄ°K SIRASI
ğŸ”´ CRITICAL - HEMEN DÃœZELTÄ°LMELÄ°:

Ore Generation Distance Bug - Ore'lar yanlÄ±ÅŸ yerde!
ItemStack Amount Bug - Game crash riski!
Location Release Leak - Memory leak!

ğŸŸ¡ IMPORTANT - BÄ°R SONRAKI UPDATE:

Tree Ground Check
Atmosphere Null Check
PlacementService Finally Block

ğŸŸ¢ NICE TO HAVE - FUTURE:

Performance Optimizations
Code Quality Improvements
Test Coverage


ğŸ’¬ SONUÃ‡
Genel DeÄŸerlendirme: 8.5/10
GÃ¼Ã§lÃ¼ YÃ¶nler:

âœ… MuhteÅŸem feature set
âœ… ModÃ¼ler architecture
âœ… Config-driven design
âœ… Async generation

ZayÄ±f YÃ¶nler:

âŒ Ore generation bug (CRITICAL!)
âŒ Loot amount bug (CRITICAL!)
âŒ Memory leak riski
âŒ Test coverage dÃ¼ÅŸÃ¼k


Hangi sorunlarÄ± Ã¶ncelikli olarak dÃ¼zeltmemi istersin? Critical bug'larÄ± tek tek ele alabiliriz!RetryClaude does not have the ability to run the code it generates yet.Kinceledikten sonra Gezegenler sadece sphere ÅŸeklinde oluÅŸuyor ve iÃ§i dolu gezegenlerde ore oluÅŸmuyor ve config dÃ¼zenlemesi kesinlikle plugine etki etmiyor confige ne yazsam gezegenler hala aynÄ± generate oluyorğŸ”´ KRÄ°TÄ°K SORUN ANALÄ°ZÄ°
SÃ¶ylediÄŸin 3 bÃ¼yÃ¼k sorunu tespit ettim. Hepsini dÃ¼zeltelim:

1. âš ï¸ SADECE SPHERE OLUÅUYOR SORUNU
Sorun KÃ¶kÃ¼:
java// GenerationManager.java - Line 85
PlanetShape shape = plugin.getShapeRegistry().getRandomShape(
    plugin.getConfigManager().getShapeWeights()
);
PROBLEM: getShapeWeights() config'den okuyor ama config'de yanlÄ±ÅŸ path!
Kontrol Et:
java// ConfigManager.java - Line 89
public Map<String, Double> getShapeWeights() {
    Map<String, Double> weights = new HashMap<>();
    ConfigurationSection section = plugin.getConfig().getConfigurationSection("shapes.weights");
    // ^^^ BU PATH YANLIÅ! Config'de "generation.shapes.weights" olmalÄ±!
    
    if (section != null) {
        for (String key : section.getKeys(false)) {
            weights.put(key, section.getDouble(key));
        }
    }
    return weights;
}
âœ… DÃœZELTÄ°LMÄ°Å HALÄ°:
java// ConfigManager.java - getShapeWeights()
public Map<String, Double> getShapeWeights() {
    Map<String, Double> weights = new HashMap<>();
    
    // DOÄRU PATH!
    ConfigurationSection section = plugin.getConfig().getConfigurationSection("generation.shapes.weights");
    
    if (section != null) {
        for (String key : section.getKeys(false)) {
            weights.put(key, section.getDouble(key));
        }
    } else {
        // Config yoksa DEFAULT WEIGHTS!
        plugin.logWarning("Shape weights not found in config! Using defaults.");
        weights.put("SPHERE", 5.0);
        weights.put("HEMISPHERE", 8.0);
        weights.put("BLOB", 10.0);
        weights.put("ELLIPSOID", 8.0);
        weights.put("ASTEROID", 7.0);
        // ... diÄŸerleri
    }
    
    plugin.logDebug("shapes", "Loaded " + weights.size() + " shape weights");
    return weights;
}
Test Ekleme:
java// SkyOrbs.java - onEnable() iÃ§inde
logInfo("Shape Weights:");
getShapeWeights().forEach((shape, weight) -> 
    logInfo("  â€¢ " + shape + ": " + weight)
);

2. âš ï¸ ORE OLUÅMUYOR SORUNU (SOLID PLANETS)
Sorun KÃ¶kÃ¼:
java// OreGenerator.java - Line 54-85
private static void generateOreType(...) {
    // SOLID PLANET:
    if (isHollow) {
        distance = shellStart + random.nextDouble() * (shellEnd - shellStart);
    } else {
        // BU KISIM TAMAMEN YANLIÅ!
        double minDistance = radius * (1.0 - depthRange[1]); 
        double maxDistance = radius * (1.0 - depthRange[0]); 
        distance = minDistance + random.nextDouble() * (maxDistance - minDistance);
    }
}
```

**PROBLEM ANALÄ°ZÄ°:**
```
depthRange[0] = 0.3 (yÃ¼zeye yakÄ±n)
depthRange[1] = 0.9 (merkeze yakÄ±n)

Åuanki kod:
minDistance = 150 * (1.0 - 0.9) = 15  (merkeze yakÄ±n)
maxDistance = 150 * (1.0 - 0.3) = 105 (yÃ¼zeye yakÄ±n)

distance = 15 + random * 90 = 15-105 arasÄ±

SORUN: Bu hesaplama doÄŸru ama MERKEZ KONTROLÃœ YOK!
Ore'lar spawn ediliyor ama gezegen iÃ§inde deÄŸil!
âœ… TAM DÃœZELTÄ°LMÄ°Å KOD:
java// OreGenerator.java - generateOreType() metodunu TAM DEÄÄ°ÅTÄ°R:

private static void generateOreType(List<BlockData> ores, OreConfig ore,
                                    int cx, int cy, int cz, int radius,
                                    double shellStart, double shellEnd,
                                    BiomeType biome, Random random, double[] depthRange,
                                    boolean isHollow) {

    // Volume calculation
    double volume;
    if (isHollow) {
        volume = (4.0/3.0) * Math.PI * (Math.pow(shellEnd, 3) - Math.pow(shellStart, 3));
    } else {
        volume = (4.0/3.0) * Math.PI * Math.pow(radius, 3);
    }

    // DAHA FAZLA ORE!
    int veinCount = (int)(volume * ore.chance * 0.002); // 2x artÄ±rÄ±ldÄ±!
    veinCount = Math.max(10, veinCount); // Minimum 10 vein

    SkyOrbs.getInstance().logDebug("ore", String.format(
        "Generating %s: %d veins (volume=%.0f, chance=%.3f)",
        ore.type.name(), veinCount, volume, ore.chance
    ));

    for (int i = 0; i < veinCount; i++) {
        // RASTGELE POZÄ°SYON OLUÅTUR
        double angle1 = random.nextDouble() * Math.PI * 2;
        double angle2 = random.nextDouble() * Math.PI;

        // DISTANCE HESAPLAMA - TAMÄ°R EDÄ°LDÄ°!
        double distance;
        
        if (isHollow) {
            // HOLLOW: Shell iÃ§inde spawn
            distance = shellStart + random.nextDouble() * (shellEnd - shellStart);
        } else {
            // SOLID: Depth range'e gÃ¶re spawn
            // depthRange[0] = 0.3 (30% depth = yÃ¼zeye yakÄ±n)
            // depthRange[1] = 0.9 (90% depth = merkeze Ã§ok yakÄ±n)
            
            // Random depth seÃ§
            double depth = depthRange[0] + random.nextDouble() * (depthRange[1] - depthRange[0]);
            
            // Distance = radius'tan iÃ§eri
            // depth 0.3 ise -> distance = radius * 0.7 (yÃ¼zeye yakÄ±n)
            // depth 0.9 ise -> distance = radius * 0.1 (merkeze Ã§ok yakÄ±n)
            distance = radius * (1.0 - depth);
        }

        // SPHERICAL COORDINATES ile 3D position hesapla
        int x = cx + (int)(Math.sin(angle2) * Math.cos(angle1) * distance);
        int y = cy + (int)(Math.cos(angle2) * distance);
        int z = cz + (int)(Math.sin(angle2) * Math.sin(angle1) * distance);

        // DOÄRULAMA - Pozisyon geÃ§erli mi?
        double actualDistance = Math.sqrt(
            (x-cx)*(x-cx) + (y-cy)*(y-cy) + (z-cz)*(z-cz)
        );

        boolean validPosition = false;
        
        if (isHollow) {
            // Hollow: Shell iÃ§inde mi?
            validPosition = (actualDistance >= shellStart - 1 && actualDistance <= shellEnd + 1);
        } else {
            // Solid: Gezegen iÃ§inde mi?
            validPosition = (actualDistance <= radius - 2); // 2 blok iÃ§erde
        }

        if (validPosition) {
            // VEÄ°N OLUÅTUR!
            generateVein(ores, x, y, z, ore, random, cx, cy, cz, radius, shellStart, shellEnd, isHollow);
            
            SkyOrbs.getInstance().logDebug("ore", String.format(
                "Spawned %s vein at (%d,%d,%d) distance=%.1f",
                ore.type.name(), x, y, z, actualDistance
            ));
        } else {
            SkyOrbs.getInstance().logDebug("ore", String.format(
                "INVALID position for %s at (%d,%d,%d) distance=%.1f (expected: %.1f-%.1f)",
                ore.type.name(), x, y, z, actualDistance, 
                isHollow ? shellStart : 0, 
                isHollow ? shellEnd : radius
            ));
        }
    }
}
VEÄ°N GENERATION DE DÃœZELTÄ°LMELÄ°:
java// OreGenerator.java - generateVein() metodu:

private static void generateVein(List<BlockData> ores, int startX, int startY, int startZ,
                                 OreConfig ore, Random random, int cx, int cy, int cz,
                                 int radius, double shellStart, double shellEnd, boolean isHollow) {

    int veinSize = ore.veinSize[0] + random.nextInt(ore.veinSize[1] - ore.veinSize[0] + 1);

    for (int i = 0; i < veinSize; i++) {
        // Vein spread
        int offsetX = random.nextInt(3) - 1;
        int offsetY = random.nextInt(3) - 1;
        int offsetZ = random.nextInt(3) - 1;

        int x = startX + offsetX;
        int y = startY + offsetY;
        int z = startZ + offsetZ;

        // Her blok iÃ§in distance check
        double distance = Math.sqrt((x-cx)*(x-cx) + (y-cy)*(y-cy) + (z-cz)*(z-cz));

        boolean valid = false;
        if (isHollow) {
            valid = (distance >= shellStart && distance <= shellEnd);
        } else {
            valid = (distance <= radius - 1);
        }

        if (!valid) continue;

        // Deepslate variant seÃ§imi
        Material material = ore.type;
        double depthRatio = distance / radius;
        
        // Merkeze yakÄ±nsa deepslate
        if (depthRatio < 0.4 && ore.deepslateVariant != null) {
            material = ore.deepslateVariant;
        }

        ores.add(new BlockData(x, y, z, material));
    }
}

3. âš ï¸ CONFIG DEÄÄ°ÅÄ°KLÄ°KLERÄ° ETKÄ° ETMÄ°YOR
Sorun KÃ¶kÃ¼:
java// ConfigManager.java - Constructor
public ConfigManager(SkyOrbs plugin) {
    this.plugin = plugin;
    // SORUN: Config burada okunuyor ama plugin henÃ¼z saveDefaultConfig() Ã§aÄŸÄ±rmamÄ±ÅŸ!
}
Ana Sorun:
java// SkyOrbs.java - onEnable()
saveDefaultConfig(); // Config dosyasÄ± oluÅŸtur

// SONRA:
configManager = new ConfigManager(this); // Config oku
BU DOÄRU! Ama config cache'leniyor ve reload Ã§alÄ±ÅŸmÄ±yor!
âœ… TAM DÃœZELTÄ°LMÄ°Å CONFIG SÄ°STEMÄ°:
java// ConfigManager.java - TAM YENÄ°DEN YAZ:

public class ConfigManager {
    
    private final SkyOrbs plugin;
    
    // CACHE'LER - reload'da temizlenecek
    private Map<String, Double> shapeWeightsCache = null;
    
    public ConfigManager(SkyOrbs plugin) {
        this.plugin = plugin;
        validateConfig(); // Ä°lk yÃ¼klemede validate et
    }
    
    /**
     * Config'i yeniden yÃ¼kle ve cache'leri temizle
     */
    public void reload() {
        plugin.reloadConfig();
        clearCaches();
        validateConfig();
        plugin.logInfo("Config reloaded and validated!");
    }
    
    /**
     * TÃ¼m cache'leri temizle
     */
    private void clearCaches() {
        shapeWeightsCache = null;
        // DiÄŸer cache'ler buraya eklenecek
        plugin.logDebug("config", "Cleared all config caches");
    }
    
    /**
     * Shape weights - CACHED
     */
    public Map<String, Double> getShapeWeights() {
        if (shapeWeightsCache != null) {
            return new HashMap<>(shapeWeightsCache); // Defensive copy
        }
        
        Map<String, Double> weights = new HashMap<>();
        
        // DOÄRU PATH!
        ConfigurationSection section = plugin.getConfig().getConfigurationSection("generation.shapes.weights");
        
        if (section != null) {
            for (String key : section.getKeys(false)) {
                double weight = section.getDouble(key);
                weights.put(key.toUpperCase(), weight); // Uppercase'e Ã§evir!
                plugin.logDebug("shapes", "Loaded shape: " + key + " = " + weight);
            }
        }
        
        // Config boÅŸsa defaults
        if (weights.isEmpty()) {
            plugin.logWarning("No shape weights found in config! Using defaults.");
            weights = getDefaultShapeWeights();
        }
        
        shapeWeightsCache = weights;
        plugin.logInfo("Loaded " + weights.size() + " shape weights from config");
        return new HashMap<>(weights);
    }
    
    /**
     * Default shape weights
     */
    private Map<String, Double> getDefaultShapeWeights() {
        Map<String, Double> defaults = new HashMap<>();
        defaults.put("SPHERE", 5.0);
        defaults.put("HEMISPHERE", 8.0);
        defaults.put("BLOB", 10.0);
        defaults.put("ELLIPSOID", 8.0);
        defaults.put("ASTEROID", 7.0);
        defaults.put("TORUS", 4.0);
        defaults.put("RING", 3.0);
        defaults.put("CYLINDER", 5.0);
        defaults.put("CONE", 6.0);
        defaults.put("DIAMOND", 5.0);
        defaults.put("CUBE", 4.0);
        defaults.put("PYRAMID", 4.0);
        defaults.put("OCTAHEDRON", 3.0);
        defaults.put("FRACTAL", 6.0);
        defaults.put("SPIKY", 5.0);
        defaults.put("COMET", 3.0);
        defaults.put("CRESCENT", 4.0);
        defaults.put("HYBRID", 2.0);
        defaults.put("LAYERED", 7.0);
        defaults.put("CRATERED", 8.0);
        defaults.put("HONEYCOMB", 5.0);
        defaults.put("SPIRAL", 6.0);
        defaults.put("WAVE", 7.0);
        defaults.put("CRYSTAL", 6.0);
        defaults.put("ORGANIC", 8.0);
        defaults.put("GEOMETRIC", 5.0);
        defaults.put("NEBULA", 4.0);
        defaults.put("ASTEROID_FIELD", 6.0);
        return defaults;
    }
    
    /**
     * Config'i validate et ve log'la
     */
    public void validateConfig() {
        List<String> issues = new ArrayList<>();
        
        // 1. Radius kontrolÃ¼
        int minRadius = getMinRadius();
        int maxRadius = getMaxRadius();
        if (minRadius >= maxRadius) {
            issues.add("minRadius (" + minRadius + ") >= maxRadius (" + maxRadius + ")");
        }
        
        // 2. Shape weights kontrolÃ¼
        Map<String, Double> weights = getShapeWeights();
        if (weights.isEmpty()) {
            issues.add("No shape weights defined!");
        }
        
        // 3. Performance ayarlarÄ±
        int blocksPerBatch = getBlocksPerBatch();
        if (blocksPerBatch > 2000) {
            issues.add("blocksPerBatch (" + blocksPerBatch + ") too high - may cause lag");
        }
        
        // 4. Shell thickness
        int shellThickness = getShellThickness();
        if (shellThickness < 3 || shellThickness > 15) {
            issues.add("shellThickness (" + shellThickness + ") should be 3-15");
        }
        
        // Issues varsa log'la
        if (!issues.isEmpty()) {
            plugin.logWarning("========================================");
            plugin.logWarning("CONFIG VALIDATION ISSUES:");
            for (String issue : issues) {
                plugin.logWarning("  âš  " + issue);
            }
            plugin.logWarning("========================================");
        } else {
            plugin.logSuccess("Config validation passed!");
        }
        
        // Debug: Config deÄŸerlerini gÃ¶ster
        if (isDebugEnabled()) {
            plugin.logDebug("config", "========================================");
            plugin.logDebug("config", "LOADED CONFIG VALUES:");
            plugin.logDebug("config", "  â€¢ minRadius: " + minRadius);
            plugin.logDebug("config", "  â€¢ maxRadius: " + maxRadius);
            plugin.logDebug("config", "  â€¢ blocksPerBatch: " + blocksPerBatch);
            plugin.logDebug("config", "  â€¢ shellThickness: " + shellThickness);
            plugin.logDebug("config", "  â€¢ asyncGeneration: " + isAsyncGenerationEnabled());
            plugin.logDebug("config", "  â€¢ oreGeneration: " + isOreGenerationEnabled());
            plugin.logDebug("config", "  â€¢ treeGeneration: " + isTreeGenerationEnabled());
            plugin.logDebug("config", "  â€¢ Shape weights: " + weights.size() + " loaded");
            plugin.logDebug("config", "========================================");
        }
    }
    
    // ... diÄŸer metodlar aynÄ± ...
}
RELOAD KOMUTUNU DÃœZELTÄ°LMÄ°Å:
java// SkyOrbs.java
public void reloadPluginConfig() {
    try {
        // 1. Config dosyasÄ±nÄ± yeniden yÃ¼kle
        reloadConfig();
        
        // 2. ConfigManager'Ä± yeniden oluÅŸtur
        configManager = new ConfigManager(this);
        
        // 3. Validate et
        configManager.validateConfig();
        
        logSuccess("========================================");
        logSuccess("CONFIG RELOADED SUCCESSFULLY!");
        logSuccess("========================================");
        
    } catch (Exception e) {
        logError("Failed to reload config!", e);
    }
}
KOMUT HANDLER'I DÃœZELTÄ°LMÄ°Å:
java// GezegenCommand.java - handleReload()
private void handleReload(CommandSender sender) {
    if (!sender.hasPermission("skyorbs.admin")) {
        sender.sendMessage(plugin.getConfigManager().getMessage("noPermission"));
        return;
    }
    
    sender.sendMessage("Â§eConfig yeniden yÃ¼kleniyor...");
    
    try {
        plugin.reloadPluginConfig();
        sender.sendMessage(plugin.getConfigManager().getMessage("configReloaded"));
        
        // Debug: Shape weights'i gÃ¶ster
        Map<String, Double> weights = plugin.getConfigManager().getShapeWeights();
        sender.sendMessage("Â§aYÃ¼klenen ÅŸekil sayÄ±sÄ±: Â§e" + weights.size());
        
    } catch (Exception e) {
        sender.sendMessage("Â§cConfig yÃ¼klenemedi! Konsolu kontrol edin.");
        plugin.logError("Config reload failed", e);
    }
}

ğŸ§ª TEST KOMUTU EKLE
java// GezegenCommand.java - onCommand() iÃ§ine ekle:

case "test", "debug" -> handleTest(sender);
java// GezegenCommand.java - Yeni metod:

private void handleTest(CommandSender sender) {
    if (!sender.hasPermission("skyorbs.admin")) {
        sender.sendMessage("Â§cYetkiniz yok!");
        return;
    }
    
    sender.sendMessage("Â§b========================================");
    sender.sendMessage("Â§bÂ§lSYSTEM TEST REPORT");
    sender.sendMessage("Â§b========================================");
    
    // 1. Config Test
    sender.sendMessage("Â§e1. CONFIG TEST:");
    sender.sendMessage("  â€¢ minRadius: Â§a" + plugin.getConfigManager().getMinRadius());
    sender.sendMessage("  â€¢ maxRadius: Â§a" + plugin.getConfigManager().getMaxRadius());
    sender.sendMessage("  â€¢ blocksPerBatch: Â§a" + plugin.getConfigManager().getBlocksPerBatch());
    
    // 2. Shape Registry Test
    sender.sendMessage("Â§e2. SHAPE REGISTRY TEST:");
    sender.sendMessage("  â€¢ Registered shapes: Â§a" + plugin.getShapeRegistry().getShapeCount());
    
    Map<String, Double> weights = plugin.getConfigManager().getShapeWeights();
    sender.sendMessage("  â€¢ Loaded weights: Â§a" + weights.size());
    sender.sendMessage("Â§7  Shapes:");
    weights.forEach((shape, weight) -> 
        sender.sendMessage("    Â§8â€¢ Â§f" + shape + " Â§7: Â§e" + weight)
    );
    
    // 3. Feature Test
    sender.sendMessage("Â§e3. FEATURE TEST:");
    sender.sendMessage("  â€¢ Ore Generation: " + 
        (plugin.getConfigManager().isOreGenerationEnabled() ? "Â§aEnabled" : "Â§cDisabled"));
    sender.sendMessage("  â€¢ Tree Generation: " + 
        (plugin.getConfigManager().isTreeGenerationEnabled() ? "Â§aEnabled" : "Â§cDisabled"));
    sender.sendMessage("  â€¢ Asteroids: " + 
        (plugin.getConfigManager().isAsteroidsEnabled() ? "Â§aEnabled" : "Â§cDisabled"));
    
    // 4. Database Test
    sender.sendMessage("Â§e4. DATABASE TEST:");
    try {
        List<Orb> orbs = plugin.getDatabaseManager().getAllOrbs();
        sender.sendMessage("  â€¢ Total planets: Â§a" + orbs.size());
    } catch (Exception e) {
        sender.sendMessage("  Â§câœ— Database error: " + e.getMessage());
    }
    
    sender.sendMessage("Â§b========================================");
}

ğŸ“ DEBUG LOGGING EKLE
java// SkyOrbs.java - onEnable() iÃ§inde shape registry'den sonra:

logInfo("========================================");
logInfo("SHAPE CONFIGURATION:");
logInfo("========================================");

Map<String, Double> weights = configManager.getShapeWeights();
if (weights.isEmpty()) {
    logWarning("âš  NO SHAPE WEIGHTS LOADED!");
} else {
    logSuccess("âœ“ Loaded " + weights.size() + " shape weights:");
    weights.entrySet().stream()
        .sorted(Map.Entry.<String, Double>comparingByValue().reversed())
        .forEach(entry -> 
            logInfo("  â€¢ " + entry.getKey() + " = " + entry.getValue())
        );
}

logInfo("========================================");
java// GenerationManager.java - createPlanetAsync() iÃ§inde:

// Shape seÃ§iminden SONRA:
PlanetShape shape = plugin.getShapeRegistry().getRandomShape(
    plugin.getConfigManager().getShapeWeights()
);

plugin.logInfo("Selected shape: " + shape.getName() + " (" + shape.getDisplayName() + ")");
plugin.logDebug("generation", "Shape deformation factor: " + shape.getDeformationFactor());

âœ… SON KONTROL LÄ°STESÄ°
Åimdi ÅŸunlarÄ± yap:
1. Config Path'i DÃ¼zelt:

âœ… ConfigManager.getShapeWeights() metodunda path'i "generation.shapes.weights" yap

2. Ore Generation'Ä± DÃ¼zelt:

âœ… OreGenerator.generateOreType() metodunu TAM deÄŸiÅŸtir (yukarÄ±daki kod)
âœ… OreGenerator.generateVein() metodunu TAM deÄŸiÅŸtir (yukarÄ±daki kod)

3. Config Reload'u DÃ¼zelt:

âœ… ConfigManager class'Ä±nÄ± TAM deÄŸiÅŸtir (cache + reload)
âœ… SkyOrbs.reloadPluginConfig() metodunu dÃ¼zelt

4. Test Komutunu Ekle:

âœ… GezegenCommand class'Ä±na handleTest() metodu ekle

5. Debug Logging Ekle:

âœ… SkyOrbs.onEnable() iÃ§ine shape logging ekle
âœ… GenerationManager.createPlanetAsync() iÃ§ine shape selection logging ekle